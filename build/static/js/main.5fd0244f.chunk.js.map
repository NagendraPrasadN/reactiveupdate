{"version":3,"sources":["components/Auth/LoginForm.module.css","components/CartContent/CartContent.module.css","store/cart-context.js","components/Layout/MainNavigation.module.css","components/CartContent/CartIcon.js","components/CartContent/CartContent.js","pages/HeaderCart.js","components/Layout/MainNavigation.js","components/Layout/Layout.js","components/Auth/LoginForm.js","pages/LoginPage.js","App.js","reportWebVitals.js","index.js","store/auth-context.js"],"names":["module","exports","defaultCartState","items","totalAmount","CartContext","React","createContext","addItem","item","removeItem","id","cartReducer","state","action","type","updatedItems","updatedTotalAmount","price","amount","itemExistenceIndex","findIndex","existingCartItem","updatingExistedItem","concat","filter","updatedItem","CartProvider","props","useReducer","cartState","dispatchCartAction","defaultValue","Provider","value","children","CartIcon","xmlns","viewBox","fill","d","CartContent","numberOfCartItems","useContext","reduce","curNumber","className","classes","starting","button","onClick","onShowCart","icon","badge","HomePage","MainNavigation","loginCtxt","AuthContext","isLoggedin","isLoggedIn","userName","localStorage","getItem","replace","header","to","logo","user","HeaderCart","logout","Layout","LoginForm","history","useHistory","useState","isLogin","setIsLogin","isLoading","setLoading","emailRef","useRef","passRef","login","onSubmit","event","preventDefault","url","emailValue","current","passValue","fetch","method","body","JSON","stringify","email","password","returnSecureToken","headers","then","response","ok","json","data","errorMessage","error","message","Error","Swal","fire","title","text","confirmButtonText","setItem","expTime","expiresIn","expirationTime","Date","getTime","idToken","catch","control","htmlFor","required","ref","actions","toggle","prevLogin","LoginPage","lazy","ProfilePage","ShoppingPage","Cart","App","authCtxt","showCart","setCarttoShow","fallback","onClose","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","logoutTimer","token","checkTokenExpires","currentTime","AuthContextProvider","loctoken","currItem","storedToken","storedExpirationTime","remTime","fetchToken","setToken","logoutHandler","useCallback","clearTimeout","useEffect","setTimeout","defaultvalue","remainTime"],"mappings":"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","file":"static/js/main.5fd0244f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"LoginForm_login__19Lrd\",\"control\":\"LoginForm_control__1Rz1s\",\"actions\":\"LoginForm_actions__1iohu\",\"toggle\":\"LoginForm_toggle__zsmPl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"CartContent_button__B3FSo\",\"icon\":\"CartContent_icon__xG9bE\",\"badge\":\"CartContent_badge__3fLwu\",\"bump\":\"CartContent_bump__3ZkZY\"};","import React, { useReducer } from 'react';\n\n\nconst defaultCartState = {\n    items: [],\n    totalAmount: 0,\n};\n\nconst CartContext = React.createContext({\n    items: [],\n    totalAmount: 0,\n    addItem: (item) => { },\n    removeItem: (id) => { }\n});\n\nconst cartReducer = (state, action) => {\n    if (action.type === 'ADD') {\n        const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n        const itemExistenceIndex = state.items.findIndex((item) => item.id === action.item.id);\n        const existingCartItem = state.items[itemExistenceIndex];\n        let updatedItems;\n        if (existingCartItem) {\n            const updatingExistedItem = { ...existingCartItem, amount: existingCartItem.amount + action.item.amount }\n            updatedItems = [...state.items];\n            updatedItems[itemExistenceIndex] = updatingExistedItem;\n        }\n        else {\n            updatedItems = state.items.concat(action.item);\n        }\n\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount,\n        };\n    }\n    if (action.type === 'REMOVE') {\n\n        const itemExistenceIndex = state.items.findIndex((item) => item.id === action.id);\n        const existingCartItem = state.items[itemExistenceIndex];\n        const updatedTotalAmount = state.totalAmount - existingCartItem.price;\n        let updatedItems;\n        if (existingCartItem.amount === 1) {\n            updatedItems = state.items.filter(item => item.id !== action.id);\n        }\n        else {\n            const updatedItem = { ...existingCartItem, amount: existingCartItem.amount - 1 };\n            updatedItems = [...state.items];\n            updatedItems[itemExistenceIndex] = updatedItem;\n        }\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount,\n        };\n    }\n\n    return defaultCartState;\n}\n\nexport const CartProvider = (props) => {\n    const [cartState, dispatchCartAction] = useReducer(cartReducer, defaultCartState)\n\n    const addItemToCartHandler = (item) => {\n        dispatchCartAction({ type: 'ADD', item: item });\n    };\n\n    const removeItemFromCartHandler = (id) => {\n        dispatchCartAction({ type: 'REMOVE', id: id });\n    };\n\n    const defaultValue = {\n        items: cartState.items,\n        totalAmount: cartState.totalAmount,\n        addItem: addItemToCartHandler,\n        removeItem: removeItemFromCartHandler,\n    }\n\n\n    return (<CartContext.Provider value={defaultValue} >\n        {props.children}\n    </CartContext.Provider>)\n}\n\nexport default CartContext;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MainNavigation_header__2lqQ1\",\"logo\":\"MainNavigation_logo__1TgMx\",\"user\":\"MainNavigation_user__3LQtk\"};","const CartIcon = () => {\n  return (\n    <svg\n      xmlns='http://www.w3.org/2000/svg'\n      viewBox='0 0 20 20'\n      fill='currentColor'\n    >\n      <path d='M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z' />\n    </svg>\n  );\n};\n\nexport default CartIcon;","\nimport { useContext } from 'react';\nimport CartContext from '../../store/cart-context';\nimport classes from './CartContent.module.css';\nimport CartIcon from './CartIcon';\n\nconst CartContent = (props) => {\n  const cartCtx = useContext(CartContext);\n\n  const { items } = cartCtx;\n\n  const numberOfCartItems = items.reduce((curNumber, item) => {\n    return curNumber + item.amount;\n  }, 0);\n  return (\n    <section className={classes.starting}>\n      <button className={classes.button} onClick={props.onShowCart} >\n        <span className={classes.icon}>\n          <CartIcon />\n        </span>\n        <span> Your Cart</span>\n        <span className={classes.badge}>{numberOfCartItems}</span>\n      </button>\n    </section>\n  )\n}\n\nexport default CartContent;","import CartContent from '../components/CartContent/CartContent';\n\nconst HomePage = (props) => {\n  return <CartContent onShowCart={props.onShowCart} />;\n};\n\nexport default HomePage;","import classes from './MainNavigation.module.css';\nimport { Link } from 'react-router-dom';\nimport { useContext } from 'react';\nimport AuthContext from '../../store/auth-context';\nimport HeaderCart from '../../pages/HeaderCart';\n\nconst MainNavigation = (props) => {\n  const loginCtxt = useContext(AuthContext);\n  const isLoggedin = loginCtxt.isLoggedIn;\n\n  const logoutHandler = () => {\n    loginCtxt.logout();\n  }\n\n  const userName =  localStorage.getItem(\"userName\") ? localStorage.getItem(\"userName\").replace('@gmail.com', '') : '';\n\n  return (\n    <header className={classes.header}>\n      <Link to='/'>\n        <div className={classes.logo}>Reactive Shop</div>\n      </Link>\n      {isLoggedin && <span className={classes.user}> Hey {userName} </span>}\n      <nav>\n        <ul>\n          {!isLoggedin &&\n            <li>\n              <Link to='/login'>Login</Link>\n            </li>\n          }\n          {isLoggedin && <HeaderCart onShowCart={props.onShowCart} />}\n\n          {isLoggedin &&\n            <li>\n              <Link to='/shopping'>Shop</Link>\n            </li>\n          }\n          {isLoggedin &&\n            <li>\n              <Link to='/profile'>Profile</Link>\n            </li>\n          }\n          {isLoggedin &&\n            <li>\n              <button onClick={logoutHandler}>LogOut</button>\n            </li>\n          }\n        </ul>\n      </nav>\n    </header>\n  )\n}\n\nexport default MainNavigation;","import MainNavigation from './MainNavigation';\nimport { Fragment } from 'react';\n\nconst Layout = (props) => {\n    return (\n        <Fragment>\n            <MainNavigation onShowCart={props.onShowCart} />\n            <main>{props.children}</main>\n        </Fragment>\n    )\n}\n\nexport default Layout;","import { useContext, useRef, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport AuthContext from '../../store/auth-context';\nimport classes from './LoginForm.module.css';\nimport Swal from 'sweetalert2';\n\nconst LoginForm = (props) => {\n\n\n  const history = useHistory();\n\n  const [isLogin, setIsLogin] = useState(true);\n  const [isLoading, setLoading] = useState(false);\n  const loginCtxt = useContext(AuthContext);\n\n  const emailRef = useRef();\n  const passRef = useRef();\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevLogin) => !prevLogin);\n  }\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    const emailValue = emailRef.current.value;\n    const passValue = passRef.current.value;\n    setLoading(true);\n    let url;\n    if (isLogin) {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD6S3dUFIy9_NjMw_NwlBLW_Rk6HfzSKhE'\n\n    }\n    else {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD6S3dUFIy9_NjMw_NwlBLW_Rk6HfzSKhE'\n    }\n    fetch(url,\n      {\n        method: 'POST',\n        body: JSON.stringify({\n          email: emailValue,\n          password: passValue,\n          returnSecureToken: true\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }\n    ).then(response => {\n      setLoading(false);\n      if (response.ok) {\n        return response.json();\n      }\n      else {\n        return response.json().then(data => {\n          let errorMessage = 'Authentication Failed';\n          if (data && data.error && data.error.message) {\n            errorMessage = data.error.message;\n          }\n          throw new Error(errorMessage)\n\n        });\n      }\n    }).then(data => {\n      Swal.fire({\n        title: 'Success!',\n        text: \"Logged In Succesfully!!\",\n        icon: 'success',\n        confirmButtonText: 'Ok'\n      })\n      localStorage.setItem(\"userName\", emailValue);\n      const expTime = +data.expiresIn;\n      const expirationTime = new Date(new Date().getTime() + (expTime * 1000));\n      loginCtxt.login(data.idToken, expirationTime);\n      history.replace('/');\n    }).catch(error => {\n      Swal.fire({\n        title: 'Error!',\n        text: error.message,\n        icon: 'error',\n        confirmButtonText: 'Ok'\n      })\n    })\n\n  }\n  return (\n    <section className={classes.login}>\n\n      <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\n      <form onSubmit={submitHandler}>\n        <div className={classes.control}>\n          <label htmlFor='email'> Enter Email</label>\n          <input type=\"email\" id=\"email\" required ref={emailRef} />\n        </div>\n\n        <div className={classes.control}>\n          <label htmlFor='password'>Your Password</label>\n          <input type='password' id='password' required ref={passRef} />\n        </div>\n\n        <div className={classes.actions}>\n          {!isLoading ? <button>{isLogin ? 'Login' : 'Sign Up'}</button> : <p>Loading...</p>}\n          <button\n            type='button'\n            className={classes.toggle}\n            onClick={switchAuthModeHandler}\n          >\n            {isLogin ? 'Create new account' : 'Login with existing account'}\n          </button>\n        </div>\n\n      </form>\n    </section>\n  );\n};\n\nexport default LoginForm;","import LoginForm from '../components/Auth/LoginForm';\nimport { Fragment } from 'react';\n\nconst LoginPage = (props) => {\n  return (\n    <Fragment>\n      <LoginForm />\n    </Fragment>\n  );\n};\n\nexport default LoginPage;","import React from 'react';\nimport { Suspense, useContext, useState } from 'react';\nimport { Redirect, Route, Switch } from 'react-router';\nimport './App.css';\nimport Layout from './components/Layout/Layout';\nimport LoginPage from './pages/LoginPage';\nimport AuthContext from './store/auth-context';\n\nconst HomePage = React.lazy(() => import('./pages/HomePage'))\nconst ProfilePage = React.lazy(() => import('./pages/ProfilePage'))\nconst ShoppingPage = React.lazy(() => import('./pages/ShoppingPage'))\nconst Cart = React.lazy(() => import('./components/CartContent/Cart'))\n\n\nfunction App() {\n  const authCtxt = useContext(AuthContext);\n  const [showCart, setCarttoShow] = useState(false);\n\n  const showCartHandler = () => {\n    setCarttoShow(true);\n  }\n\n  const HideCartHandler = () => {\n    setCarttoShow(false);\n  }\n  return (\n\n    <Layout onShowCart={showCartHandler}>\n      <Suspense fallback={<p>Loading...</p>}>\n        {authCtxt.isLoggedIn && showCart && <Cart onClose={HideCartHandler} />}\n        <Switch>\n          <Route path=\"/\" exact>\n            {authCtxt.isLoggedIn && <HomePage />}\n            {!authCtxt.isLoggedIn && <Redirect to='/login' />}\n          </Route>\n          {!authCtxt.isLoggedIn &&\n            <Route path=\"/login\" >\n              <LoginPage />\n            </Route>}\n\n          <Route path=\"/shopping\" >\n            {authCtxt.isLoggedIn && <ShoppingPage />}\n            {!authCtxt.isLoggedIn && <Redirect to='/login' />}\n          </Route>\n          <Route path=\"/profile\" >\n            {authCtxt.isLoggedIn && <ProfilePage />}\n            {!authCtxt.isLoggedIn && <Redirect to='/login' />}\n          </Route>\n\n          <Route path=\"*\" >\n            <Redirect to='/' exact />\n          </Route>\n        </Switch>\n      </Suspense>\n    </Layout>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\nimport { AuthContextProvider } from './store/auth-context';\nimport { CartProvider } from './store/cart-context';\n\n\nReactDOM.render(\n  <AuthContextProvider>\n    <CartProvider>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n    </CartProvider>\n  </AuthContextProvider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React, { useCallback, useEffect, useState } from 'react';\n\nconst AuthContext = React.createContext({\n    token: null,\n    isLoggedIn: false,\n    login: (token, expirationTime) => { },\n    logout: () => { },\n})\n\nconst checkTokenExpires = (expirationTime) => {\n    const currentTime = new Date().getTime();\n    const expTime = new Date(expirationTime).getTime();\n    const remTime = expTime - currentTime;\n\n    return remTime;\n}\nlet logoutTimer;\n\nconst fetchToken = () => {\n    const storedToken = localStorage.getItem('token');\n    const storedExpirationTime = localStorage.getItem('expirationTime');\n    const remTime = checkTokenExpires(storedExpirationTime);\n\n    if (remTime <= 60000) {\n        localStorage.removeItem('token');\n        localStorage.removeItem('expirationTime');\n        return null;\n    }\n    return {\n        token: storedToken,\n        expTime: remTime\n    }\n}\n\nexport const AuthContextProvider = (props) => {\n    const currItem = fetchToken();\n    let loctoken;\n    if (currItem) {\n        loctoken = currItem.token;\n    }\n    const [token, setToken] = useState(loctoken);\n\n    const isLogin = !!token;\n\n    const logoutHandler = useCallback(() => {\n        setToken(null);\n        localStorage.removeItem('token');\n        localStorage.removeItem('expirationTime');\n        if (logoutTimer) {\n            clearTimeout(logoutTimer)\n        }\n    }, [])\n\n    const loginHandler = (token, expirationTime) => {\n        setToken(token);\n        localStorage.setItem('token', token);\n        localStorage.setItem('expirationTime', expirationTime);\n\n        const remainTime = checkTokenExpires(expirationTime)\n\n        logoutTimer = setTimeout(logoutHandler, remainTime);\n    }\n\n    useEffect(() => {\n        if (currItem) {\n            setTimeout(() => {\n                logoutHandler();\n            }, currItem.expTime);\n        }\n    }, [currItem, logoutHandler])\n\n\n\n    const defaultvalue = {\n        token: token,\n        isLoggedIn: !!isLogin,\n        login: loginHandler,\n        logout: logoutHandler,\n    };\n    return (\n        <AuthContext.Provider value={defaultvalue}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n}\n\nexport default AuthContext;"],"sourceRoot":""}