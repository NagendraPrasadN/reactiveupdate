(this["webpackJsonpreactive-update"]=this["webpackJsonpreactive-update"]||[]).push([[0],{11:function(e,t,n){e.exports={login:"LoginForm_login__19Lrd",control:"LoginForm_control__1Rz1s",actions:"LoginForm_actions__1iohu",toggle:"LoginForm_toggle__zsmPl"}},15:function(e,t,n){e.exports={button:"CartContent_button__B3FSo",icon:"CartContent_icon__xG9bE",badge:"CartContent_badge__3fLwu",bump:"CartContent_bump__3ZkZY"}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var o=n(7),i=n(25),c=n(13),r=n(1),a=n.n(r),s=n(0),l={items:[],totalAmount:0},u=a.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){}}),j=function(e,t){if("ADD"===t.type){var n,o=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex((function(e){return e.id===t.item.id})),a=e.items[r];if(a){var s=Object(c.a)(Object(c.a)({},a),{},{amount:a.amount+t.item.amount});(n=Object(i.a)(e.items))[r]=s}else n=e.items.concat(t.item);return{items:n,totalAmount:o}}if("REMOVE"===t.type){var u,j=e.items.findIndex((function(e){return e.id===t.id})),b=e.items[j],d=e.totalAmount-b.price;if(1===b.amount)u=e.items.filter((function(e){return e.id!==t.id}));else{var m=Object(c.a)(Object(c.a)({},b),{},{amount:b.amount-1});(u=Object(i.a)(e.items))[j]=m}return{items:u,totalAmount:d}}return l},b=function(e){var t=Object(r.useReducer)(j,l),n=Object(o.a)(t,2),i=n[0],c=n[1],a={items:i.items,totalAmount:i.totalAmount,addItem:function(e){c({type:"ADD",item:e})},removeItem:function(e){c({type:"REMOVE",id:e})}};return Object(s.jsx)(u.Provider,{value:a,children:e.children})};t.b=u},18:function(e,t,n){e.exports={header:"MainNavigation_header__2lqQ1",logo:"MainNavigation_logo__1TgMx",user:"MainNavigation_user__3LQtk"}},35:function(e,t,n){},36:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),c=n(26),r=n.n(c),a=(n(35),n(7)),s=n(2),l=(n(36),n(18)),u=n.n(l),j=n(9),b=n(8),d=n(16),m=n(15),g=n.n(m),h=n(0),O=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(h.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},x=function(e){var t=Object(o.useContext)(d.b).items.reduce((function(e,t){return e+t.amount}),0);return Object(h.jsx)("section",{className:g.a.starting,children:Object(h.jsxs)("button",{className:g.a.button,onClick:e.onShowCart,children:[Object(h.jsx)("span",{className:g.a.icon,children:Object(h.jsx)(O,{})}),Object(h.jsx)("span",{children:" Your Cart"}),Object(h.jsx)("span",{className:g.a.badge,children:t})]})})},f=function(e){return Object(h.jsx)(x,{onShowCart:e.onShowCart})},p=function(e){var t=Object(o.useContext)(b.b),n=t.isLoggedIn,i=localStorage.getItem("userName")?localStorage.getItem("userName").replace("@gmail.com",""):"";return Object(h.jsxs)("header",{className:u.a.header,children:[Object(h.jsx)(j.b,{to:"/",children:Object(h.jsx)("div",{className:u.a.logo,children:"Reactive Shop"})}),n&&Object(h.jsxs)("span",{className:u.a.user,children:[" Hey ",i," "]}),Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{children:[!n&&Object(h.jsx)("li",{children:Object(h.jsx)(j.b,{to:"/login",children:"Login"})}),n&&Object(h.jsx)(f,{onShowCart:e.onShowCart}),n&&Object(h.jsx)("li",{children:Object(h.jsx)(j.b,{to:"/shopping",children:"Shop"})}),n&&Object(h.jsx)("li",{children:Object(h.jsx)(j.b,{to:"/profile",children:"Profile"})}),n&&Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(){t.logout()},children:"LogOut"})})]})})]})},v=function(e){return Object(h.jsxs)(o.Fragment,{children:[Object(h.jsx)(p,{onShowCart:e.onShowCart}),Object(h.jsx)("main",{children:e.children})]})},S=n(11),_=n.n(S),I=n(24),C=n.n(I),w=function(e){var t=Object(s.g)(),n=Object(o.useState)(!0),i=Object(a.a)(n,2),c=i[0],r=i[1],l=Object(o.useState)(!1),u=Object(a.a)(l,2),j=u[0],d=u[1],m=Object(o.useContext)(b.b),g=Object(o.useRef)(),O=Object(o.useRef)();return Object(h.jsxs)("section",{className:_.a.login,children:[Object(h.jsx)("h1",{children:c?"Login":"Sign Up"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n,o=g.current.value,i=O.current.value;d(!0),n=c?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyD6S3dUFIy9_NjMw_NwlBLW_Rk6HfzSKhE":"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyD6S3dUFIy9_NjMw_NwlBLW_Rk6HfzSKhE",fetch(n,{method:"POST",body:JSON.stringify({email:o,password:i,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return d(!1),e.ok?e.json():e.json().then((function(e){var t="Authentication Failed";throw e&&e.error&&e.error.message&&(t=e.error.message),new Error(t)}))})).then((function(e){C.a.fire({title:"Success!",text:"Logged In Succesfully!!",icon:"success",confirmButtonText:"Ok"}),localStorage.setItem("userName",o);var n=+e.expiresIn,i=new Date((new Date).getTime()+1e3*n);m.login(e.idToken,i),t.replace("/")})).catch((function(e){C.a.fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"Ok"})}))},children:[Object(h.jsxs)("div",{className:_.a.control,children:[Object(h.jsx)("label",{htmlFor:"email",children:" Enter Email"}),Object(h.jsx)("input",{type:"email",id:"email",required:!0,ref:g})]}),Object(h.jsxs)("div",{className:_.a.control,children:[Object(h.jsx)("label",{htmlFor:"password",children:"Your Password"}),Object(h.jsx)("input",{type:"password",id:"password",required:!0,ref:O})]}),Object(h.jsxs)("div",{className:_.a.actions,children:[j?Object(h.jsx)("p",{children:"Loading..."}):Object(h.jsx)("button",{children:c?"Login":"Sign Up"}),Object(h.jsx)("button",{type:"button",className:_.a.toggle,onClick:function(){r((function(e){return!e}))},children:c?"Create new account":"Login with existing account"})]})]})]})},L=function(e){return Object(h.jsx)(o.Fragment,{children:Object(h.jsx)(w,{})})},k=i.a.lazy((function(){return n.e(6).then(n.bind(null,69))})),y=i.a.lazy((function(){return n.e(5).then(n.bind(null,67))})),N=i.a.lazy((function(){return n.e(3).then(n.bind(null,66))})),T=i.a.lazy((function(){return n.e(4).then(n.bind(null,68))}));var F=function(){var e=Object(o.useContext)(b.b),t=Object(o.useState)(!1),n=Object(a.a)(t,2),i=n[0],c=n[1];return Object(h.jsx)(v,{onShowCart:function(){c(!0)},children:Object(h.jsxs)(o.Suspense,{fallback:Object(h.jsx)("p",{children:"Loading..."}),children:[e.isLoggedIn&&i&&Object(h.jsx)(T,{onClose:function(){c(!1)}}),Object(h.jsxs)(s.d,{children:[Object(h.jsxs)(s.b,{path:"/",exact:!0,children:[e.isLoggedIn&&Object(h.jsx)(k,{}),!e.isLoggedIn&&Object(h.jsx)(s.a,{to:"/login"})]}),!e.isLoggedIn&&Object(h.jsx)(s.b,{path:"/login",children:Object(h.jsx)(L,{})}),Object(h.jsxs)(s.b,{path:"/shopping",children:[e.isLoggedIn&&Object(h.jsx)(N,{}),!e.isLoggedIn&&Object(h.jsx)(s.a,{to:"/login"})]}),Object(h.jsxs)(s.b,{path:"/profile",children:[e.isLoggedIn&&Object(h.jsx)(y,{}),!e.isLoggedIn&&Object(h.jsx)(s.a,{to:"/login"})]}),Object(h.jsx)(s.b,{path:"*",children:Object(h.jsx)(s.a,{to:"/",exact:!0})})]})]})})},A=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,65)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),i(e),c(e),r(e)}))};r.a.render(Object(h.jsx)(b.a,{children:Object(h.jsx)(d.a,{children:Object(h.jsx)(j.a,{children:Object(h.jsx)(F,{})})})}),document.getElementById("root")),A()},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o,i=n(7),c=n(1),r=n.n(c),a=n(0),s=r.a.createContext({token:null,isLoggedIn:!1,login:function(e,t){},logout:function(){}}),l=function(e){var t=(new Date).getTime();return new Date(e).getTime()-t},u=function(e){var t,n=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("expirationTime"),n=l(t);return n<=6e4?(localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),null):{token:e,expTime:n}}();n&&(t=n.token);var r=Object(c.useState)(t),u=Object(i.a)(r,2),j=u[0],b=u[1],d=!!j,m=Object(c.useCallback)((function(){b(null),localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),o&&clearTimeout(o)}),[]);Object(c.useEffect)((function(){n&&setTimeout((function(){m()}),n.expTime)}),[n,m]);var g={token:j,isLoggedIn:!!d,login:function(e,t){b(e),localStorage.setItem("token",e),localStorage.setItem("expirationTime",t);var n=l(t);o=setTimeout(m,n)},logout:m};return Object(a.jsx)(s.Provider,{value:g,children:e.children})};t.b=s}},[[53,1,2]]]);
//# sourceMappingURL=main.5fd0244f.chunk.js.map